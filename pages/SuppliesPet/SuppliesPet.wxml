<!--pages/SuppliesPet/SuppliesPet.wxml-->
<view class="container">
  <view wx:if="{{loading && suppliesList.length === 0}}" class="loading">åŠ è½½ä¸­...</view>
  <view wx:if="{{error && suppliesList.length === 0}}" class="error">åŠ è½½å¤±è´¥ï¼Œè¯·ä¸‹æ‹‰é‡è¯•</view>
  <view wx:if="{{suppliesList.length === 0 && !loading && !error}}" class="empty">æš‚æ— å•†å“</view>
  <block wx:for="{{suppliesList}}" wx:key="id">
    <view class="supply-item">
      <image class="supply-img" src="{{item.imageUrl}}" mode="aspectFill" />
      <view class="card-content">
        <view class="supply-main-row">
          <text class="supply-name">{{item.productName}}</text>
          <text class="supply-category">{{item.category}}</text>
          <text wx:if="{{item.isHot == 1}}" class="supply-hot">çƒ­é”€</text>
        </view>
        <view class="supply-meta-row">
          <text class="supply-name">{{item.name}}</text>
          <view class="like-section" catchtap="toggleLike" data-target-id="{{item.id}}">
            <view class="like-icon {{likeStates[item.id] ? 'liked' : ''}}">
              {{likeStates[item.id] ? 'â¤ï¸' : 'ğŸ¤'}}
            </view>
            <view class="like-count">{{likeCounts[item.id] || 0}}</view>
          </view>
        </view>
        <view class="supply-desc-block">
          <text class="supply-desc">{{item.description}}</text>
        </view>
        <view class="action-container">
          <button class="detail-btn" data-id="{{item.id}}" bindtap="goToDetail">æŸ¥çœ‹è¯¦æƒ…</button>
        </view>
      </view>
    </view>
  </block>
  <!-- åŠ è½½æ›´å¤šæç¤º -->
  <view wx:if="{{loading && suppliesList.length > 0}}" class="loading-more">åŠ è½½ä¸­...</view>
  <view wx:if="{{!hasMore && suppliesList.length > 0}}" class="no-more">æ²¡æœ‰æ›´å¤šäº†</view>
</view>